<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 14. Migration from mod_proxy</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="mod_cluster Documentation"/><link rel="up" href="index.html" title="mod_cluster Documentation"/><link rel="prev" href="mod_jk.html" title="Chapter 13. Migration from mod_jk"/><link rel="next" href="demo.html" title="Chapter 15. Load Balancing Demo Application"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="mod_jk.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="demo.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="mod_proxy"/>Chapter 14. Migration from mod_proxy</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="mod_proxy.html#d0e3367">14.1. Workers</a></span></dt><dt><span class="sect1"><a href="mod_proxy.html#d0e3564">14.2. Balancers</a></span></dt></dl></div><p>As mod_cluster is a sophisticated balancer migration from mod_proxy to
  mod_cluster is strait forward. mod_cluster replaces a reverse proxy with
  loadbalancing. A reversed proxy is configured like:</p><pre class="programlisting">ProxyRequests Off
&lt;Proxy *&gt;
Order deny,allow
Allow from all
&lt;/Proxy&gt;
ProxyPass /foo http://foo.example.com/bar
ProxyPassReverse /foo http://foo.example.com/bar</pre><p>All the general proxy parameters could be used in mod_cluster they
  work like in mod_proxy, only the balancers and the workers definitions are
  slightly different.</p><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3367"/>14.1. Workers</h2></div></div></div><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th><p>Mod_proxy Parameter</p></th><th><p>ClusterListener parameter</p></th><th><p>Remarks</p></th></tr></thead><tbody><tr><td><p>min</p></td><td><p>-</p></td><td><p>Not supported in this version</p></td></tr><tr><td><p>max</p></td><td><p>-</p></td><td><p>mod_cluster uses mod_proxy default
            value</p></td></tr><tr><td><p>smax</p></td><td><p>smax</p></td><td><p>Same as mod_proxy</p></td></tr><tr><td><p>ttl</p></td><td><p>ttl</p></td><td><p>Same as mod_proxy</p></td></tr><tr><td><p>acquire</p></td><td><p>workerTimeout</p></td><td><p>Same as mod_proxy acquire but in
            seconds</p></td></tr><tr><td><p>disablereuse</p></td><td><p>-</p></td><td><p>mod_cluster will disable the node in case of error
            and the ClusterListener will for the reuse via the STATUS
            message</p></td></tr><tr><td><p>flushPackets</p></td><td><p>flushPackets</p></td><td><p>Same as mod_proxy</p></td></tr><tr><td><p>flushwait</p></td><td><p>flushwait</p></td><td><p>Same as mod_proxy</p></td></tr><tr><td><p>keepalive</p></td><td><p>-</p></td><td><p>Always on: OS KEEP_ALIVE is always used. Use
            connectionTimeout in the &lt;Connector&gt; if
            needed</p></td></tr><tr><td><p>lbset</p></td><td><p>-</p></td><td><p>Not supported</p></td></tr><tr><td><p>ping</p></td><td><p>ping</p></td><td><p>Same as mod_proxy Default value 10
            seconds</p></td></tr><tr><td><p>lbfactor</p></td><td><p>-</p></td><td><p>The load factor is received by mod_cluster from a
            calculated value in the ClusterListener</p></td></tr><tr><td><p>redirect</p></td><td><p>-</p></td><td><p>Not supported lbfactor sent to 0 makes a standby
            node</p></td></tr><tr><td><p>retry</p></td><td><p>-</p></td><td><p>ClusterListener will test when the node is back
            online</p></td></tr><tr><td><p>route</p></td><td><p>JVMRoute</p></td><td><p>In fact JBossWEB via the JVMRoute in the Engine will
            add it</p></td></tr><tr><td><p>status</p></td><td><p>-</p></td><td><p>mod_cluster has a finer status handling: by context
            via the ENABLE/STOP/DISABLE/REMOVE application messages.
            hot-standby is done by lbfactor = 0 and Error by lbfactor = 1 both
            values are sent in STATUS message by the
            ClusterListener</p></td></tr><tr><td><p>timeout</p></td><td><p>nodeTimeout</p></td><td><p>Default wait for ever
            (http://httpd.apache.org/docs/2.2/mod/mod_proxy.html is wrong
            there)</p></td></tr><tr><td><p>ttl</p></td><td><p>ttl</p></td><td><p>Default 60 seconds</p></td></tr></tbody></table></div></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3564"/>14.2. Balancers</h2></div></div></div><div class="informaltable"><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th><p>Mod_proxy Parameter</p></th><th><p>ClusterListener parameter</p></th><th><p>Remarks</p></th></tr></thead><tbody><tr><td><p>lbmethod</p></td><td><p>-</p></td><td><p>There is only one load balancing method in
            mod_cluster "cluster_byrequests"</p></td></tr><tr><td><p>maxattempts</p></td><td><p>maxAttempts</p></td><td><p>Default 1</p></td></tr><tr><td><p>nofailover</p></td><td><p>stickySessionForce</p></td><td><p>Same as in mod_proxy</p></td></tr><tr><td><p>stickysession</p></td><td><p>StickySessionCookie/StickySessionPath</p></td><td><p>The 2 parameters in the ClusterListener are combined
            in one that behaves like in mod_proxy</p></td></tr><tr><td><p>timeout</p></td><td><p>workerTimeout</p></td><td><p>Default 1 seconds</p></td></tr></tbody></table></div><p/></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="mod_jk.html"><strong>Prev</strong>Chapter 13. Migration from mod_jk</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="demo.html"><strong>Next</strong>Chapter 15. Load Balancing Demo Application</a></li></ul></body></html>