<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 17. Frequently Asked questions</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Mod_cluster doc"/><link rel="up" href="index.html" title="Mod_cluster doc"/><link rel="prev" href="changelog.html" title="Chapter 16. Change Log"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="changelog.html"><strong>Prev</strong></a></li><li class="next"/></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="faq"/>Chapter 17. Frequently Asked questions</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="faq.html#d0e4913">17.1. What is Advertise</a></span></dt><dt><span class="sect1"><a href="faq.html#d0e4950">17.2. What to do if I don't want to use Advertise (multicast):</a></span></dt><dt><span class="sect1"><a href="faq.html#d0e4962">17.3. I am using Tomcat 7 / 6 what should I do:</a></span></dt></dl></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4913"/>17.1. What is Advertise</h2></div></div></div><p>Advertise allows autodiscovery of httpd proxies by the cluster nodes. It is done by sending multicast messages from httpd to the cluster. The httpd specialized module: mod_advertise sends UDP message on a multicast group, both mod_advertise and the cluster listener joined the multicast group and the cluster receives the messages.</p><p>Example for mod_advertise message:</p><p>HTTP/1.0 200 OK</p><p> Date: Wed, 08 Apr 2009 12:26:32 GMT</p><p> Sequence: 16</p><p> Digest: f2d5f806a53effa6c67973d2ddcdd233</p><p> Server: 1b60092e-76f3-49fd-9f99-a51c69c89e2d</p><p> X-Manager-Address: 127.0.0.1:6666</p><p> X-Manager-Url: /bla</p><p> X-Manager-Protocol: http</p><p> X-Manager-Host: 10.33.144.3</p><p/><p>The X-Manager-Address header value is used by the cluster logic to send information about the cluster to the proxy. It is the IP and port of the VirtualHost where mod_advertise is configured or URL parameter of the ServerAdvertise directive.</p><p>See <a href="javaproperties.html#advertise">Proxy Discovery</a> in Configuration Properties and mod_advertise in Apache httpd configuration.</p><p/></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4950"/>17.2. What to do if I don't want to use Advertise (multicast):</h2></div></div></div><p>In the VirtualHost receiving the MCPM of httpd.conf don't use any
    Advertise directive or use:</p><pre class="programlisting">ServerAdvertise Off</pre><p>In mod_cluster-jboss-beans.xml add the addresses and ports of the
    VirtualHost to the proxyList property and set advertise to false, for
    example:</p><pre class="programlisting">&lt;property name="proxyList"&gt;10.33.144.3:6666,10.33.144.1:6666&lt;/property&gt;

&lt;property name="advertise"&gt;false&lt;/property&gt;</pre></div><div class="sect1" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4962"/>17.3. I am using Tomcat 7 / 6 what should I do:</h2></div></div></div><p>See at the end of <a href="javaconf.html" title="Chapter 6. java configuration">java configuration</a>
    You can't use the mod_cluster clustered mode with Tomcat so you get a
    loadbalancing logic similar to mod_jk but with a dynamic
    configuration.</p></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="changelog.html"><strong>Prev</strong>Chapter 16. Change Log</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li></ul></body></html>